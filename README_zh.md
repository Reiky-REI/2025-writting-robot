# 五连杆写字机器人 🖊️🤖

> TJUT 机器人学课程项目 - 基于五连杆机构的智能写字系统

## 🎯 项目概览

这是一个集成了机械工程、嵌入式控制、计算机视觉和人工智能的综合性机器人项目。通过五连杆并联机构实现高精度的平面写字功能。

## ⚡ 快速体验

```bash
# 1. 克隆项目
git clone https://github.com/Reiky-REI/2025-writting-robot.git

# 2. 安装依赖
pip install opencv-python numpy torch

# 3. 启动演示
python code/Rpi/main/main.py
```

## 🔧 核心功能

### 🎨 图像处理
- **骨架提取**: 将输入图像转换为单像素宽的骨架结构
- **路径规划**: 智能识别笔画顺序和连接关系
- **轨迹优化**: 最短路径算法优化书写效率

### 🧮 运动控制  
- **逆运动学**: 五连杆机构的精确数学建模
- **实时控制**: STM32 100Hz高频控制
- **精度补偿**: 机械误差自动校准

### 🎮 用户交互
- **图形界面**: 直观的Python GUI操作界面  
- **参数调节**: 实时调整书写参数
- **状态监控**: 可视化系统运行状态

## 📐 技术规格

| 参数 | 指标 |
|------|------|
| 🎯 **定位精度** | ±0.1mm |
| 📏 **工作区域** | 100×80mm |  
| ⚡ **书写速度** | 最高50mm/s |
| 🔄 **控制频率** | 100Hz |
| 🎚️ **角度精度** | 0.1° |

## 🏗️ 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   图像输入      │───▶│   算法处理      │───▶│   硬件执行      │
│                 │    │                 │    │                 │
│ • 手写图像      │    │ • 图像处理     │    │ • STM32控制     │
│ • 数字化文本    │    │ • 路径规划     │    │ • 舵机驱动     │  
│ • 实时绘制      │    │ • 逆运动学     │    │ • 机械执行     │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## 📁 代码结构

```
code/
├── Rpi/                    # 上位机Python代码
│   ├── front/              # 前端处理
│   │   ├── diraction_OK.py # 🎯 核心算法
│   │   └── GUI/            # 界面程序
│   ├── Inverse/            # 逆运动学
│   └── main/               # 主控程序
└── writening-robot-contoraller/  # STM32嵌入式
    ├── Core/Src/main.c     # 🔧 主控代码  
    └── Drivers/            # 硬件驱动
```

## 🚀 使用指南

### 基础使用
1. **硬件连接**: STM32 → 舵机 → 机械结构
2. **软件启动**: 运行`main.py`启动系统
3. **输入图像**: 选择要书写的图像文件
4. **开始书写**: 点击开始按钮执行书写

### 高级功能
- **参数调优**: 调整书写速度、精度等参数
- **路径预览**: 预览生成的书写轨迹
- **实时监控**: 查看系统运行状态和调试信息

## 🧪 核心算法

### 图像到指令转换
```python
# 核心处理流程
图像输入 → 二值化 → 骨架化 → 关键点检测 → 笔画分割 → 路径优化 → 指令生成
```

### 五连杆逆运动学
```python
def compute_phi(xF, yF):
    """根据笔端坐标计算关节角度"""
    # 数学建模 + 数值求解
    return phi1, phi4  # 返回两个关节角度
```

## 📊 项目成果

### ✅ 已实现功能
- [x] 完整的机械系统设计 
- [x] STM32实时控制系统
- [x] Python图像处理算法
- [x] 逆运动学求解器
- [x] GUI用户界面
- [x] 系统集成测试

### 🔬 技术验证  
- **精度测试**: 实测定位误差<0.2mm
- **速度测试**: 单字书写时间<30s
- **稳定性**: 连续运行>2小时无故障

## 💡 技术亮点

1. **🎯 高精度控制**: 独特的五连杆机构设计
2. **🧠 智能算法**: 图像处理 + 路径规划 
3. **⚡ 实时响应**: 嵌入式实时控制系统
4. **🔧 模块化设计**: 易于扩展和维护

## 🤝 参与贡献

欢迎提交Issue和Pull Request！

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 发起Pull Request

## 📄 开源协议

MIT License - 详见 [LICENSE](LICENSE) 文件

---

<div align="center">

**🎓 TJUT 机器人学课程 #10小组作品**

⭐ 如果这个项目对你有帮助，请给个Star! ⭐

</div>